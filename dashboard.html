<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Clothing Store Inventory</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="business-styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Main Application -->
    <div class="app-container">
        <!-- Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>Clothing Store</h2>
                <button class="sidebar-toggle" id="sidebarToggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            <ul class="sidebar-menu">
                <li><a href="#" data-section="dashboard" class="menu-item active">
                    <i class="fas fa-chart-dashboard"></i>
                    <span>Analytics Dashboard</span>
                </a></li>
                <li><a href="#" data-section="products" class="menu-item">
                    <i class="fas fa-tshirt"></i>
                    <span>Inventory Management</span>
                </a></li>
                <li><a href="#" data-section="categories" class="menu-item">
                    <i class="fas fa-tags"></i>
                    <span>Categories</span>
                </a></li>
                <li><a href="#" data-section="reports" class="menu-item">
                    <i class="fas fa-chart-bar"></i>
                    <span>Reports</span>
                </a></li>
                <li class="admin-only"><a href="#" data-section="users" class="menu-item">
                    <i class="fas fa-users"></i>
                    <span>Users</span>
                </a></li>
                <li><a href="#" data-section="settings" class="menu-item">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <header class="app-header">
                <div class="header-left">
                    <button class="mobile-menu-toggle" id="mobileMenuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 class="page-title" id="pageTitle">Dashboard</h1>
                </div>
                <div class="header-right">
                    <div class="notification-icon">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge" id="notificationBadge">3</span>
                    </div>
                    <div class="user-menu">
                        <div class="user-info" id="userInfo">
                            <span class="user-name">John Doe</span>
                            <span class="user-role">Admin</span>
                        </div>
                        <div class="user-dropdown">
                            <button class="user-avatar" id="userDropdown">
                                <i class="fas fa-user-circle"></i>
                            </button>
                            <div class="dropdown-menu" id="userDropdownMenu">
                                <a href="#">Profile</a>
                                <a href="#">Settings</a>
                                <a href="#" id="logoutBtn">Logout</a>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Dashboard Section - Executive Overview -->
            <section id="dashboardSection" class="content-section active">
                <!-- Executive Summary Header -->
                <div class="executive-header">
                    <div class="executive-title">
                        <h1>Executive Dashboard</h1>
                        <p>Real-time business intelligence for strategic decision making</p>
                        <div class="date-range">
                            <i class="fas fa-calendar"></i>
                            <span id="currentPeriod">Current Period: October 2024</span>
                        </div>
                    </div>
                    <div class="executive-actions">
                        <button class="btn btn--outline" onclick="exportDashboard()">
                            <i class="fas fa-download"></i> Export Report
                        </button>
                        <button class="btn btn--primary" onclick="refreshDashboard()">
                            <i class="fas fa-sync-alt"></i> Refresh Data
                        </button>
                    </div>
                </div>

                <!-- Key Performance Indicators -->
                <div class="kpi-section">
                    <h3 class="section-title">Key Performance Indicators</h3>
                    <div class="kpi-grid-enhanced">
                        <div class="kpi-card-pro">
                            <div class="kpi-header">
                                <div class="kpi-icon revenue">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div class="kpi-trend positive">
                                    <i class="fas fa-arrow-up"></i>
                                    <span>+12.5%</span>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h2 id="totalRevenue">$0</h2>
                                <p>Total Revenue</p>
                                <small>vs last month</small>
                            </div>
                        </div>
                        
                        <div class="kpi-card-pro">
                            <div class="kpi-header">
                                <div class="kpi-icon inventory">
                                    <i class="fas fa-boxes"></i>
                                </div>
                                <div class="kpi-trend positive">
                                    <i class="fas fa-arrow-up"></i>
                                    <span>+8.2%</span>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h2 id="inventoryValue">$0</h2>
                                <p>Inventory Value</p>
                                <small>total stock worth</small>
                            </div>
                        </div>
                        
                        <div class="kpi-card-pro">
                            <div class="kpi-header">
                                <div class="kpi-icon profit">
                                    <i class="fas fa-percentage"></i>
                                </div>
                                <div class="kpi-trend positive">
                                    <i class="fas fa-arrow-up"></i>
                                    <span>+3.1%</span>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h2 id="profitMargin">0%</h2>
                                <p>Profit Margin</p>
                                <small>gross margin</small>
                            </div>
                        </div>
                        
                        <div class="kpi-card-pro">
                            <div class="kpi-header">
                                <div class="kpi-icon turnover">
                                    <i class="fas fa-sync"></i>
                                </div>
                                <div class="kpi-trend negative">
                                    <i class="fas fa-arrow-down"></i>
                                    <span>-2.3%</span>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h2 id="inventoryTurnover">0x</h2>
                                <p>Inventory Turnover</p>
                                <small>times per year</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Business Metrics Grid -->
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-header">
                            <h4>Operational Metrics</h4>
                            <i class="fas fa-cogs"></i>
                        </div>
                        <div class="metric-list">
                            <div class="metric-item">
                                <span>Total SKUs</span>
                                <strong id="totalSKUs">0</strong>
                            </div>
                            <div class="metric-item alert">
                                <span>Low Stock Alerts</span>
                                <strong id="lowStockAlerts" class="text-warning">0</strong>
                            </div>
                            <div class="metric-item critical">
                                <span>Out of Stock</span>
                                <strong id="outOfStockItems" class="text-error">0</strong>
                            </div>
                            <div class="metric-item">
                                <span>Avg. Stock Days</span>
                                <strong id="avgStockDays">0</strong>
                            </div>
                        </div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-header">
                            <h4>Financial Performance</h4>
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="metric-list">
                            <div class="metric-item">
                                <span>Monthly Sales</span>
                                <strong id="monthlySalesMetric">$0</strong>
                            </div>
                            <div class="metric-item">
                                <span>Cost of Goods</span>
                                <strong id="totalCOGS">$0</strong>
                            </div>
                            <div class="metric-item">
                                <span>Gross Profit</span>
                                <strong id="grossProfit" class="text-success">$0</strong>
                            </div>
                            <div class="metric-item">
                                <span>ROI</span>
                                <strong id="roi">0%</strong>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advanced Analytics Charts -->
                <div class="analytics-section">
                    <h3 class="section-title">Business Analytics</h3>
                    <div class="charts-grid-pro">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h4>Revenue & Profit Trends</h4>
                                <div class="chart-controls">
                                    <select id="revenueTimeframe" class="form-control">
                                        <option value="6m">Last 6 Months</option>
                                        <option value="12m" selected>Last 12 Months</option>
                                        <option value="24m">Last 24 Months</option>
                                    </select>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="revenueChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="chart-card">
                            <div class="chart-header">
                                <h4>Category Performance</h4>
                                <div class="chart-legend">
                                    <span class="legend-item"><span class="legend-color" style="background: #1FB8CD;"></span>Revenue</span>
                                    <span class="legend-item"><span class="legend-color" style="background: #FFC185;"></span>Units Sold</span>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="categoryChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="chart-card full-width">
                            <div class="chart-header">
                                <h4>Inventory Health Matrix</h4>
                                <div class="health-indicators">
                                    <span class="health-item good">Healthy Stock</span>
                                    <span class="health-item warning">Attention Needed</span>
                                    <span class="health-item critical">Critical Action Required</span>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="inventoryHealthChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Executive Summary Cards -->
                <div class="summary-section">
                    <h3 class="section-title">Executive Summary</h3>
                    <div class="summary-grid">
                        <div class="summary-card priority-high">
                            <div class="summary-header">
                                <i class="fas fa-exclamation-triangle"></i>
                                <h4>Immediate Actions Required</h4>
                            </div>
                            <div class="summary-content" id="immediateActions">
                                <!-- Dynamic content -->
                            </div>
                        </div>
                        
                        <div class="summary-card priority-medium">
                            <div class="summary-header">
                                <i class="fas fa-chart-bar"></i>
                                <h4>Performance Insights</h4>
                            </div>
                            <div class="summary-content" id="performanceInsights">
                                <!-- Dynamic content -->
                            </div>
                        </div>
                        
                        <div class="summary-card priority-low">
                            <div class="summary-header">
                                <i class="fas fa-lightbulb"></i>
                                <h4>Growth Opportunities</h4>
                            </div>
                            <div class="summary-content" id="growthOpportunities">
                                <!-- Dynamic content -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Products Section - Inventory Management -->
            <section id="productsSection" class="content-section">
                <div class="section-header">
                    <h2>Inventory Management</h2>
                    <div class="header-actions">
                        <button class="btn btn--primary" id="addProductBtn">
                            <i class="fas fa-plus"></i> Add Product
                        </button>
                    </div>
                </div>

                <!-- Product Stats -->
                <div id="productStatsContainer" style="display: none; margin-bottom: var(--space-24);"></div>

                <!-- Filters -->
                <div class="filters-row">
                    <div class="search-box">
                        <input type="text" id="productSearch" class="form-control" placeholder="Search products...">
                        <i class="fas fa-search"></i>
                    </div>
                    <select id="categoryFilter" class="form-control">
                        <option value="">All Categories</option>
                    </select>
                </div>

                <!-- Products Table -->
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Product</th>
                                <th>SKU</th>
                                <th>Category</th>
                                <th>Size/Color</th>
                                <th>Stock</th>
                                <th>Price</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="productsTableBody">
                            <!-- Products will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Categories Section -->
            <section id="categoriesSection" class="content-section">
                <div class="section-header">
                    <h2>Category Management</h2>
                    <div class="header-actions">
                        <button class="btn btn--primary" id="addCategoryBtn">
                            <i class="fas fa-plus"></i> Add Category
                        </button>
                    </div>
                </div>

                <div class="categories-grid" id="categoriesGrid">
                    <!-- Categories will be loaded here -->
                </div>
            </section>

            <!-- Reports Section - Business Intelligence -->
            <section id="reportsSection" class="content-section">
                <div class="reports-header">
                    <div class="reports-title">
                        <h1>Business Intelligence Reports</h1>
                        <p>Comprehensive analytics and insights for data-driven decisions</p>
                    </div>
                    <div class="reports-actions">
                        <select id="reportPeriod" class="form-control">
                            <option value="today">Today</option>
                            <option value="week">This Week</option>
                            <option value="month" selected>This Month</option>
                            <option value="quarter">This Quarter</option>
                            <option value="year">This Year</option>
                        </select>
                        <button class="btn btn--outline" onclick="exportAllReports()">
                            <i class="fas fa-file-export"></i> Export All
                        </button>
                        <button class="btn btn--primary" onclick="generateReport()">
                            <i class="fas fa-chart-line"></i> Generate Report
                        </button>
                    </div>
                </div>

                <!-- Executive Summary Dashboard -->
                <div class="executive-summary">
                    <h3 class="section-title">Executive Summary</h3>
                    <div class="summary-metrics">
                        <div class="summary-metric revenue">
                            <div class="metric-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="metric-data">
                                <h3 id="summaryRevenue">$0</h3>
                                <p>Total Revenue</p>
                                <span class="metric-change positive">+15.2% vs last period</span>
                            </div>
                        </div>
                        
                        <div class="summary-metric profit">
                            <div class="metric-icon">
                                <i class="fas fa-coins"></i>
                            </div>
                            <div class="metric-data">
                                <h3 id="summaryProfit">$0</h3>
                                <p>Gross Profit</p>
                                <span class="metric-change positive">+8.7% margin improvement</span>
                            </div>
                        </div>
                        
                        <div class="summary-metric inventory">
                            <div class="metric-icon">
                                <i class="fas fa-warehouse"></i>
                            </div>
                            <div class="metric-data">
                                <h3 id="summaryInventory">0</h3>
                                <p>Inventory Turnover</p>
                                <span class="metric-change negative">-2.1% efficiency decline</span>
                            </div>
                        </div>
                        
                        <div class="summary-metric alerts">
                            <div class="metric-icon">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="metric-data">
                                <h3 id="summaryAlerts">0</h3>
                                <p>Critical Alerts</p>
                                <span class="metric-change critical">Immediate attention required</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Detailed Reports Grid -->
                <div class="reports-grid-pro">
                    <!-- Financial Performance Report -->
                    <div class="report-card priority-high">
                        <div class="report-header">
                            <div class="report-title">
                                <i class="fas fa-chart-pie"></i>
                                <h4>Financial Performance Analysis</h4>
                            </div>
                            <div class="report-status">
                                <span class="status-badge critical">Action Required</span>
                            </div>
                        </div>
                        <div class="report-content">
                            <div class="financial-metrics">
                                <div class="metric-row">
                                    <span>Revenue Growth Rate</span>
                                    <strong class="positive">+12.5%</strong>
                                </div>
                                <div class="metric-row">
                                    <span>Profit Margin</span>
                                    <strong id="reportProfitMargin">0%</strong>
                                </div>
                                <div class="metric-row">
                                    <span>Cost Efficiency</span>
                                    <strong class="negative">-3.2%</strong>
                                </div>
                                <div class="metric-row">
                                    <span>ROI</span>
                                    <strong id="reportROI">0%</strong>
                                </div>
                            </div>
                            <div class="chart-mini">
                                <canvas id="financialTrendChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Inventory Health Report -->
                    <div class="report-card priority-medium">
                        <div class="report-header">
                            <div class="report-title">
                                <i class="fas fa-boxes"></i>
                                <h4>Inventory Health Report</h4>
                            </div>
                            <div class="report-status">
                                <span class="status-badge warning">Monitor Closely</span>
                            </div>
                        </div>
                        <div class="report-content">
                            <div class="inventory-health" id="inventoryHealthReport">
                                <!-- Dynamic content -->
                            </div>
                            <div class="health-chart">
                                <canvas id="inventoryHealthMini"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Category Performance Report -->
                    <div class="report-card priority-medium">
                        <div class="report-header">
                            <div class="report-title">
                                <i class="fas fa-tags"></i>
                                <h4>Category Performance</h4>
                            </div>
                            <div class="report-status">
                                <span class="status-badge good">Performing Well</span>
                            </div>
                        </div>
                        <div class="report-content">
                            <div class="category-performance" id="categoryPerformanceReport">
                                <!-- Dynamic content -->
                            </div>
                        </div>
                    </div>

                    <!-- Risk Assessment Report -->
                    <div class="report-card priority-high">
                        <div class="report-header">
                            <div class="report-title">
                                <i class="fas fa-shield-alt"></i>
                                <h4>Risk Assessment</h4>
                            </div>
                            <div class="report-status">
                                <span class="status-badge critical">High Risk</span>
                            </div>
                        </div>
                        <div class="report-content">
                            <div class="risk-items" id="riskAssessmentReport">
                                <!-- Dynamic content -->
                            </div>
                        </div>
                    </div>

                    <!-- Market Trends Report -->
                    <div class="report-card priority-low">
                        <div class="report-header">
                            <div class="report-title">
                                <i class="fas fa-trending-up"></i>
                                <h4>Market Trends & Opportunities</h4>
                            </div>
                            <div class="report-status">
                                <span class="status-badge info">Informational</span>
                            </div>
                        </div>
                        <div class="report-content">
                            <div class="trend-analysis" id="marketTrendsReport">
                                <!-- Dynamic content -->
                            </div>
                        </div>
                    </div>

                    <!-- Operational Efficiency Report -->
                    <div class="report-card priority-medium">
                        <div class="report-header">
                            <div class="report-title">
                                <i class="fas fa-cogs"></i>
                                <h4>Operational Efficiency</h4>
                            </div>
                            <div class="report-status">
                                <span class="status-badge warning">Needs Improvement</span>
                            </div>
                        </div>
                        <div class="report-content">
                            <div class="efficiency-metrics" id="operationalEfficiencyReport">
                                <!-- Dynamic content -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Detailed Analytics Section -->
                <div class="detailed-analytics">
                    <h3 class="section-title">Detailed Analytics</h3>
                    <div class="analytics-tabs">
                        <button class="tab-btn active" onclick="showAnalyticsTab('sales')">Sales Analysis</button>
                        <button class="tab-btn" onclick="showAnalyticsTab('inventory')">Inventory Analysis</button>
                        <button class="tab-btn" onclick="showAnalyticsTab('profitability')">Profitability Analysis</button>
                        <button class="tab-btn" onclick="showAnalyticsTab('forecasting')">Forecasting</button>
                    </div>
                    
                    <div class="analytics-content">
                        <div id="salesAnalytics" class="analytics-tab active">
                            <div class="analytics-grid">
                                <div class="analytics-chart">
                                    <h4>Sales Performance by Category</h4>
                                    <canvas id="salesByCategoryChart"></canvas>
                                </div>
                                <div class="analytics-table">
                                    <h4>Top Performing Products</h4>
                                    <div id="topProductsTable"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="inventoryAnalytics" class="analytics-tab">
                            <div class="analytics-grid">
                                <div class="analytics-chart">
                                    <h4>Inventory Turnover Analysis</h4>
                                    <canvas id="inventoryTurnoverChart"></canvas>
                                </div>
                                <div class="analytics-insights">
                                    <h4>Key Insights</h4>
                                    <div id="inventoryInsights"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="profitabilityAnalytics" class="analytics-tab">
                            <div class="analytics-grid">
                                <div class="analytics-chart">
                                    <h4>Profit Margin by Category</h4>
                                    <canvas id="profitMarginChart"></canvas>
                                </div>
                                <div class="analytics-recommendations">
                                    <h4>Recommendations</h4>
                                    <div id="profitabilityRecommendations"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="forecastingAnalytics" class="analytics-tab">
                            <div class="analytics-grid">
                                <div class="analytics-chart">
                                    <h4>Sales Forecast (Next 6 Months)</h4>
                                    <canvas id="salesForecastChart"></canvas>
                                </div>
                                <div class="analytics-predictions">
                                    <h4>Predictions & Trends</h4>
                                    <div id="forecastingPredictions"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Users Section -->
            <section id="usersSection" class="content-section">
                <div class="section-header">
                    <h2>User Management</h2>
                    <div class="header-actions">
                        <button class="btn btn--primary" id="addUserBtn">
                            <i class="fas fa-plus"></i> Add User
                        </button>
                    </div>
                </div>

                <!-- Users Stats -->
                <div class="users-stats" style="display: none; margin-bottom: var(--space-24);">
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="kpi-content">
                                <h3 id="totalUsersCount">0</h3>
                                <p>Total Users</p>
                            </div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-icon success">
                                <i class="fas fa-user-check"></i>
                            </div>
                            <div class="kpi-content">
                                <h3 id="activeUsersCount">0</h3>
                                <p>Active Users</p>
                            </div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-icon warning">
                                <i class="fas fa-user-shield"></i>
                            </div>
                            <div class="kpi-content">
                                <h3 id="adminUsersCount">0</h3>
                                <p>Administrators</p>
                            </div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="kpi-content">
                                <h3 id="recentLoginsCount">0</h3>
                                <p>Recent Logins</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Users Table -->
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>User</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th>Status</th>
                                <th>Details</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody">
                            <!-- Users will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settingsSection" class="content-section">
                <div class="section-header">
                    <h2>System Settings</h2>
                </div>

                <div class="settings-grid">
                    <div class="card">
                        <div class="card__body">
                            <h3>Profile Settings</h3>
                            <form id="profileForm">
                                <div class="form-group">
                                    <label class="form-label">Name</label>
                                    <input type="text" id="profileName" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Email</label>
                                    <input type="email" id="profileEmail" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Role</label>
                                    <input type="text" id="profileRole" class="form-control" readonly>
                                </div>
                                <button type="submit" class="btn btn--primary">Update Profile</button>
                            </form>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card__body">
                            <h3>System Preferences</h3>
                            <div class="preference-item">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="emailNotifications">
                                    Email Notifications
                                </label>
                            </div>
                            <div class="preference-item">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="autoReorder">
                                    Auto Reorder Alerts
                                </label>
                            </div>
                            <div class="preference-item">
                                <label class="form-label">Low Stock Threshold</label>
                                <input type="range" id="stockThreshold" class="form-range" min="10" max="50" value="20">
                                <div class="range-value">20%</div>
                            </div>
                            <button class="btn btn--primary" onclick="saveSystemPreferences()">Save Preferences</button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card__body">
                            <h3>Security</h3>
                            <div class="security-item">
                                <div class="security-info">
                                    <strong>Change Password</strong>
                                    <small>Update your account password</small>
                                </div>
                                <button class="btn btn--outline" onclick="changePassword()">Change</button>
                            </div>
                            <div class="security-item">
                                <div class="security-info">
                                    <strong>Logout All Sessions</strong>
                                    <small>Sign out from all devices</small>
                                </div>
                                <button class="btn btn--outline" onclick="logoutAllSessions()">Logout All</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Product Modal -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="productModalTitle">Add Product</h3>
                <button class="modal-close" id="closeProductModal">&times;</button>
            </div>
            <form id="productForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Product Name</label>
                        <input type="text" id="productName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">SKU</label>
                        <input type="text" id="productSku" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Category</label>
                        <select id="productCategory" class="form-control" required>
                            <option value="">Select Category</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Price</label>
                        <input type="number" id="productPrice" class="form-control" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Cost</label>
                        <input type="number" id="productCost" class="form-control" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Current Stock</label>
                        <input type="number" id="productStock" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Min Stock</label>
                        <input type="number" id="productMinStock" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Max Stock</label>
                        <input type="number" id="productMaxStock" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Size</label>
                        <select id="productSize" class="form-control">
                            <option value="">Select Size</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Color</label>
                        <select id="productColor" class="form-control">
                            <option value="">Select Color</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Material</label>
                        <select id="productMaterial" class="form-control">
                            <option value="">Select Material</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Brand</label>
                        <select id="productBrand" class="form-control">
                            <option value="">Select Brand</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Season</label>
                        <select id="productSeason" class="form-control">
                            <option value="">Select Season</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Image URL</label>
                        <input type="url" id="productImage" class="form-control">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea id="productDescription" class="form-control" rows="3"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn--secondary" id="cancelProductModal">Cancel</button>
                    <button type="submit" class="btn btn--primary">Save Product</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="app.js"></script>
    <script>
        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ðŸ“Š Dashboard Page Loaded');
            
            // Check authentication
            const currentUser = JSON.parse(sessionStorage.getItem('currentUser') || 'null');
            const loginTime = sessionStorage.getItem('loginTime');
            
            if (!currentUser || !loginTime) {
                // Redirect to login if not authenticated
                window.location.href = 'login.html';
                return;
            }
            
            // Check session expiry (8 hours)
            const sessionAge = Date.now() - parseInt(loginTime);
            const maxSessionAge = 8 * 60 * 60 * 1000; // 8 hours
            
            if (sessionAge > maxSessionAge) {
                sessionStorage.clear();
                showToast('Session expired. Please login again.', 'warning');
                setTimeout(() => {
                    window.location.href = 'login.html';
                }, 2000);
                return;
            }
            
            // Initialize application with user data
            initializeDashboard(currentUser);
        });

        function initializeDashboard(user) {
            // Update user info in header
            document.querySelector('.user-name').textContent = user.name;
            document.querySelector('.user-role').textContent = user.role;
            
            // Show/hide admin-only elements
            if (user.role === 'Admin') {
                document.body.classList.add('role-admin');
            } else {
                document.body.classList.remove('role-admin');
            }
            
            // Initialize event listeners
            initializeEventListeners();
            
            // Load initial data
            loadDashboardData();
            
            // Show welcome message
            showToast(`Welcome back, ${user.name}!`, 'success');
        }

        function initializeEventListeners() {
            // Navigation
            document.querySelectorAll('.menu-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    const section = e.currentTarget.getAttribute('data-section');
                    navigateToSection(section);
                });
            });

            // Mobile menu
            document.getElementById('mobileMenuToggle').addEventListener('click', toggleMobileMenu);
            document.getElementById('sidebarToggle').addEventListener('click', toggleSidebar);

            // User dropdown
            document.getElementById('userDropdown').addEventListener('click', toggleUserDropdown);

            // Logout
            document.getElementById('logoutBtn').addEventListener('click', handleLogout);

            // Product management
            document.getElementById('addProductBtn').addEventListener('click', showAddProductModal);
            document.getElementById('closeProductModal').addEventListener('click', hideProductModal);
            document.getElementById('cancelProductModal').addEventListener('click', hideProductModal);

            // Search and filters
            document.getElementById('productSearch').addEventListener('input', renderProductsTable);
            document.getElementById('categoryFilter').addEventListener('change', renderProductsTable);

            // Category management
            document.getElementById('addCategoryBtn').addEventListener('click', showAddCategoryModal);

            // User management
            document.getElementById('addUserBtn').addEventListener('click', showAddUserModal);

            // Close modals when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal')) {
                    hideProductModal();
                }
            });

            // Close dropdowns when clicking outside
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.user-dropdown')) {
                    document.getElementById('userDropdownMenu').classList.remove('show');
                }
            });
        }

        function navigateToSection(sectionName) {
            // Update active menu item
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[data-section="${sectionName}"]`).classList.add('active');
            
            // Update page title
            const titles = {
                dashboard: 'Analytics Dashboard',
                products: 'Inventory Management',
                categories: 'Category Management',
                reports: 'Detailed Reports',
                users: 'User Management',
                settings: 'System Settings'
            };
            document.getElementById('pageTitle').textContent = titles[sectionName] || sectionName;
            
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(`${sectionName}Section`).classList.add('active');
            
            // Load section-specific content
            switch(sectionName) {
                case 'dashboard':
                    loadDashboardData();
                    break;
                case 'products':
                    loadProductsData();
                    break;
                case 'categories':
                    loadCategoriesData();
                    break;
                case 'reports':
                    loadReportsData();
                    break;
                case 'users':
                    loadUsersData();
                    break;
                case 'settings':
                    loadSettingsData();
                    break;
            }
            
            // Close mobile menu if open
            document.getElementById('sidebar').classList.remove('show');
        }

        // Sample data storage
        const sampleData = {
            categories: [
                { id: 1, name: "Shirts & Tops", description: "T-shirts, blouses, tank tops" },
                { id: 2, name: "Pants & Bottoms", description: "Jeans, trousers, shorts" },
                { id: 3, name: "Dresses & Skirts", description: "Casual and formal dresses" },
                { id: 4, name: "Outerwear", description: "Jackets, coats, blazers" },
                { id: 5, name: "Footwear", description: "Shoes, boots, sandals" }
            ],
            products: [
                { id: 1, name: "Classic White Shirt", sku: "CWS001", categoryId: 1, category: "Shirts & Tops", price: 45.99, cost: 22.00, stock: 15, minStock: 10, maxStock: 100, size: "M", color: "White", image: "https://images.unsplash.com/photo-1596755094514-f87e34085b2c?w=150" },
                { id: 2, name: "Slim Fit Jeans", sku: "SFJ002", categoryId: 2, category: "Pants & Bottoms", price: 79.99, cost: 35.00, stock: 8, minStock: 12, maxStock: 80, size: "32", color: "Blue", image: "https://images.unsplash.com/photo-1542272604-787c3835535d?w=150" },
                { id: 3, name: "Summer Dress", sku: "SD003", categoryId: 3, category: "Dresses & Skirts", price: 89.99, cost: 40.00, stock: 25, minStock: 15, maxStock: 60, size: "S", color: "Floral", image: "https://images.unsplash.com/photo-1595777457583-95e059d581b8?w=150" },
                { id: 4, name: "Leather Jacket", sku: "LJ004", categoryId: 4, category: "Outerwear", price: 199.99, cost: 95.00, stock: 6, minStock: 8, maxStock: 30, size: "L", color: "Black", image: "https://images.unsplash.com/photo-1551028719-00167b16eac5?w=150" },
                { id: 5, name: "Running Sneakers", sku: "RS005", categoryId: 5, category: "Footwear", price: 129.99, cost: 65.00, stock: 22, minStock: 18, maxStock: 75, size: "9", color: "Gray", image: "https://images.unsplash.com/photo-1549298916-b41d501d3772?w=150" }
            ],
            activities: [
                { user: 'John Doe', action: 'Added new product', details: 'Summer Dress - Floral', time: '2 hours ago', type: 'success' },
                { user: 'Jane Smith', action: 'Updated stock', details: 'Running Sneakers: +25 units', time: '3 hours ago', type: 'info' },
                { user: 'Mike Johnson', action: 'Low stock alert', details: 'Leather Jacket below minimum', time: '4 hours ago', type: 'warning' }
            ]
        };

        function loadDashboardData() {
            const products = sampleData.products;
            const totalProducts = products.length;
            const lowStockItems = products.filter(p => p.stock < p.minStock).length;
            const outOfStock = products.filter(p => p.stock === 0).length;
            const totalValue = products.reduce((sum, p) => sum + (p.stock * p.price), 0);
            const totalCost = products.reduce((sum, p) => sum + (p.stock * p.cost), 0);
            const monthlySales = 45678.90;
            const grossProfit = monthlySales - (totalCost * 0.6); // Estimated COGS
            const profitMargin = ((grossProfit / monthlySales) * 100);
            const inventoryTurnover = 4.2;
            const activeUsers = 8;

            // Update Enhanced KPIs
            document.getElementById('totalRevenue').textContent = `$${monthlySales.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            document.getElementById('inventoryValue').textContent = `$${totalValue.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            document.getElementById('profitMargin').textContent = `${profitMargin.toFixed(1)}%`;
            document.getElementById('inventoryTurnover').textContent = `${inventoryTurnover}x`;

            // Update Business Metrics
            document.getElementById('totalSKUs').textContent = totalProducts.toLocaleString();
            document.getElementById('lowStockAlerts').textContent = lowStockItems.toLocaleString();
            document.getElementById('outOfStockItems').textContent = outOfStock.toLocaleString();
            document.getElementById('avgStockDays').textContent = Math.round(365 / inventoryTurnover);
            document.getElementById('monthlySalesMetric').textContent = `$${monthlySales.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            document.getElementById('totalCOGS').textContent = `$${(totalCost * 0.6).toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            document.getElementById('grossProfit').textContent = `$${grossProfit.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            document.getElementById('roi').textContent = `${((grossProfit / totalValue) * 100).toFixed(1)}%`;

            // Update notification badge
            const totalAlerts = lowStockItems + outOfStock;
            const badge = document.getElementById('notificationBadge');
            badge.textContent = totalAlerts;
            badge.style.display = totalAlerts > 0 ? 'block' : 'none';

            // Load enhanced charts and insights
            loadEnhancedCharts();
            loadExecutiveSummary();
            loadBusinessInsights();
        }

        function loadEnhancedCharts() {
            // Revenue & Profit Trends Chart
            const revenueCtx = document.getElementById('revenueChart');
            if (revenueCtx) {
                new Chart(revenueCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct'],
                        datasets: [{
                            label: 'Revenue',
                            data: [32000, 35000, 33000, 38000, 36000, 42000, 45000, 43000, 47000, 45678],
                            borderColor: '#4CAF50',
                            backgroundColor: 'rgba(76, 175, 80, 0.1)',
                            tension: 0.4,
                            fill: true
                        }, {
                            label: 'Profit',
                            data: [12800, 14000, 13200, 15200, 14400, 16800, 18000, 17200, 18800, 18271],
                            borderColor: '#2196F3',
                            backgroundColor: 'rgba(33, 150, 243, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            intersect: false,
                            mode: 'index'
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return '$' + (value / 1000) + 'K';
                                    }
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'top'
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return context.dataset.label + ': $' + context.parsed.y.toLocaleString();
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Category Performance Chart
            const categoryCtx = document.getElementById('categoryChart');
            if (categoryCtx) {
                const categoryData = sampleData.categories.map(cat => {
                    const products = sampleData.products.filter(p => p.categoryId === cat.id);
                    const revenue = products.reduce((sum, p) => sum + (p.stock * p.price * 0.3), 0); // Estimated monthly sales
                    const units = products.reduce((sum, p) => sum + Math.floor(p.stock * 0.2), 0); // Estimated units sold
                    return {
                        name: cat.name,
                        revenue: revenue,
                        units: units
                    };
                });

                new Chart(categoryCtx, {
                    type: 'bar',
                    data: {
                        labels: categoryData.map(d => d.name),
                        datasets: [{
                            label: 'Revenue ($)',
                            data: categoryData.map(d => d.revenue),
                            backgroundColor: '#1FB8CD',
                            yAxisID: 'y'
                        }, {
                            label: 'Units Sold',
                            data: categoryData.map(d => d.units),
                            backgroundColor: '#FFC185',
                            yAxisID: 'y1'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                type: 'linear',
                                display: true,
                                position: 'left',
                                ticks: {
                                    callback: function(value) {
                                        return '$' + value.toLocaleString();
                                    }
                                }
                            },
                            y1: {
                                type: 'linear',
                                display: true,
                                position: 'right',
                                grid: {
                                    drawOnChartArea: false,
                                },
                                ticks: {
                                    callback: function(value) {
                                        return value + ' units';
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Inventory Health Matrix
            const healthCtx = document.getElementById('inventoryHealthChart');
            if (healthCtx) {
                const healthData = sampleData.products.map(p => ({
                    x: p.stock,
                    y: (p.stock / p.minStock) * 100,
                    r: (p.price / 10),
                    label: p.name
                }));

                new Chart(healthCtx, {
                    type: 'bubble',
                    data: {
                        datasets: [{
                            label: 'Inventory Health',
                            data: healthData,
                            backgroundColor: healthData.map(d => 
                                d.y < 100 ? 'rgba(244, 67, 54, 0.6)' : 
                                d.y < 150 ? 'rgba(255, 152, 0, 0.6)' : 
                                'rgba(76, 175, 80, 0.6)'
                            ),
                            borderColor: healthData.map(d => 
                                d.y < 100 ? '#F44336' : 
                                d.y < 150 ? '#FF9800' : 
                                '#4CAF50'
                            )
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'Current Stock Level'
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: 'Stock Health (% of minimum)'
                                },
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            }
                        },
                        plugins: {
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const point = context.raw;
                                        return `${point.label}: ${point.x} units (${point.y.toFixed(1)}% of min)`;
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }

        function loadActivities() {
            const container = document.getElementById('activitiesList');
            const activities = sampleData.activities;

            container.innerHTML = activities.map(activity => `
                <div class="activity-item">
                    <div class="activity-icon ${activity.type}">
                        <i class="fas fa-${activity.type === 'success' ? 'plus-circle' : activity.type === 'info' ? 'edit' : 'exclamation-triangle'}"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-action">
                            <strong>${activity.user}</strong> ${activity.action.toLowerCase()}
                        </div>
                        <div class="activity-details">${activity.details}</div>
                    </div>
                    <div class="activity-time">${activity.time}</div>
                </div>
            `).join('');
        }

        function loadProductsData() {
            loadCategoryFilter();
            renderProductsTable();
            updateProductStats();
        }

        function loadCategoryFilter() {
            const filter = document.getElementById('categoryFilter');
            filter.innerHTML = '<option value="">All Categories</option>';
            sampleData.categories.forEach(cat => {
                filter.innerHTML += `<option value="${cat.name}">${cat.name}</option>`;
            });
        }

        function renderProductsTable() {
            const tbody = document.getElementById('productsTableBody');
            const searchTerm = document.getElementById('productSearch').value.toLowerCase();
            const categoryFilter = document.getElementById('categoryFilter').value;
            
            let filteredProducts = sampleData.products.filter(product => {
                const matchesSearch = !searchTerm || 
                    product.name.toLowerCase().includes(searchTerm) ||
                    product.sku.toLowerCase().includes(searchTerm);
                const matchesCategory = !categoryFilter || product.category === categoryFilter;
                return matchesSearch && matchesCategory;
            });
            
            if (filteredProducts.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" style="text-align: center; padding: 40px; color: var(--color-text-secondary);">
                            No products found
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = filteredProducts.map(product => {
                const stockStatus = getStockStatus(product);
                return `
                    <tr>
                        <td>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <img src="${product.image}" alt="${product.name}" 
                                     style="width: 40px; height: 40px; border-radius: 6px; object-fit: cover;"
                                     onerror="this.src='https://via.placeholder.com/40x40/cccccc/666666?text=IMG'">
                                <div>
                                    <strong>${product.name}</strong><br>
                                    <small style="color: var(--color-text-secondary);">${product.category}</small>
                                </div>
                            </div>
                        </td>
                        <td><code>${product.sku}</code></td>
                        <td><span class="status status--info">${product.category}</span></td>
                        <td>
                            <div style="text-align: center;">
                                <strong>${product.size}</strong><br>
                                <small style="color: var(--color-text-secondary);">${product.color}</small>
                            </div>
                        </td>
                        <td>
                            <div style="text-align: center;">
                                <span class="stock-badge ${stockStatus.class}">${product.stock}</span><br>
                                <small style="color: var(--color-text-secondary);">Min: ${product.minStock}</small>
                            </div>
                        </td>
                        <td>
                            <strong>$${product.price.toFixed(2)}</strong><br>
                            <small style="color: var(--color-text-secondary);">Cost: $${product.cost.toFixed(2)}</small>
                        </td>
                        <td><span class="status status--${stockStatus.class === 'low' ? 'error' : 'success'}">${stockStatus.text}</span></td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn btn--sm btn--outline btn-icon" onclick="editProduct(${product.id})" title="Edit">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn--sm btn--outline btn-icon" onclick="deleteProduct(${product.id})" title="Delete">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function getStockStatus(product) {
            if (product.stock === 0) {
                return { class: 'low', text: 'Out of Stock' };
            } else if (product.stock < product.minStock) {
                return { class: 'low', text: 'Low Stock' };
            } else {
                return { class: 'normal', text: 'In Stock' };
            }
        }

        function updateProductStats() {
            const products = sampleData.products;
            const lowStockCount = products.filter(p => p.stock < p.minStock).length;
            const outOfStockCount = products.filter(p => p.stock === 0).length;
            const totalValue = products.reduce((sum, p) => sum + (p.stock * p.price), 0);
            
            const container = document.getElementById('productStatsContainer');
            if (container) {
                container.style.display = 'block';
                container.innerHTML = `
                    <div style="display: flex; justify-content: space-around; text-align: center;">
                        <div><strong>${products.length}</strong><br><small>Total Items</small></div>
                        <div><strong style="color: var(--color-warning);">${lowStockCount}</strong><br><small>Low Stock</small></div>
                        <div><strong style="color: var(--color-error);">${outOfStockCount}</strong><br><small>Out of Stock</small></div>
                        <div><strong>$${totalValue.toLocaleString('en-US', {minimumFractionDigits: 2})}</strong><br><small>Total Value</small></div>
                    </div>
                `;
            }
        }

        function loadCategoriesData() {
            renderCategoriesGrid();
        }

        function renderCategoriesGrid() {
            const grid = document.getElementById('categoriesGrid');
            const categories = sampleData.categories;
            
            grid.innerHTML = categories.map(category => {
                const categoryProducts = sampleData.products.filter(p => p.categoryId === category.id);
                const productCount = categoryProducts.length;
                const totalStock = categoryProducts.reduce((sum, p) => sum + p.stock, 0);
                const totalValue = categoryProducts.reduce((sum, p) => sum + (p.stock * p.price), 0);
                
                return `
                    <div class="category-card">
                        <div class="category-header">
                            <h4>${category.name}</h4>
                            <div class="action-buttons">
                                <button class="btn btn--sm btn--outline btn-icon" onclick="editCategory(${category.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn--sm btn--outline btn-icon" onclick="deleteCategory(${category.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <p class="category-description">${category.description}</p>
                        <div class="category-stats">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span>Products:</span>
                                <strong>${productCount}</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span>Total Stock:</span>
                                <strong>${totalStock}</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>Value:</span>
                                <strong>$${totalValue.toLocaleString('en-US', {minimumFractionDigits: 2})}</strong>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function loadReportsData() {
            loadExecutiveReportSummary();
            loadDetailedReports();
            loadAnalyticsTabs();
        }

        function loadExecutiveReportSummary() {
            const products = sampleData.products;
            const totalRevenue = 45678.90;
            const totalCost = products.reduce((sum, p) => sum + (p.stock * p.cost), 0);
            const grossProfit = totalRevenue - (totalCost * 0.6);
            const inventoryTurnover = 4.2;
            const criticalAlerts = products.filter(p => p.stock === 0).length + products.filter(p => p.stock < p.minStock * 0.5).length;

            document.getElementById('summaryRevenue').textContent = `$${totalRevenue.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            document.getElementById('summaryProfit').textContent = `$${grossProfit.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            document.getElementById('summaryInventory').textContent = `${inventoryTurnover}x`;
            document.getElementById('summaryAlerts').textContent = criticalAlerts;
        }

        function loadDetailedReports() {
            const products = sampleData.products;
            const totalRevenue = 45678.90;
            const totalCost = products.reduce((sum, p) => sum + (p.stock * p.cost), 0);
            const grossProfit = totalRevenue - (totalCost * 0.6);
            const profitMargin = ((grossProfit / totalRevenue) * 100);
            const roi = ((grossProfit / (totalCost * 0.6)) * 100);

            // Update financial metrics
            document.getElementById('reportProfitMargin').textContent = `${profitMargin.toFixed(1)}%`;
            document.getElementById('reportROI').textContent = `${roi.toFixed(1)}%`;

            // Inventory Health Report
            const lowStockProducts = products.filter(p => p.stock < p.minStock);
            const outOfStockProducts = products.filter(p => p.stock === 0);
            const overstockProducts = products.filter(p => p.stock > p.maxStock);

            document.getElementById('inventoryHealthReport').innerHTML = `
                <div class="health-metric">
                    <span class="health-label">Healthy Stock:</span>
                    <strong class="text-success">${products.length - lowStockProducts.length - overstockProducts.length} items</strong>
                </div>
                <div class="health-metric">
                    <span class="health-label">Low Stock:</span>
                    <strong class="text-warning">${lowStockProducts.length} items</strong>
                </div>
                <div class="health-metric">
                    <span class="health-label">Out of Stock:</span>
                    <strong class="text-error">${outOfStockProducts.length} items</strong>
                </div>
                <div class="health-metric">
                    <span class="health-label">Overstock:</span>
                    <strong class="text-info">${overstockProducts.length} items</strong>
                </div>
            `;

            // Category Performance Report
            const categoryPerformance = sampleData.categories.map(cat => {
                const categoryProducts = products.filter(p => p.categoryId === cat.id);
                const revenue = categoryProducts.reduce((sum, p) => sum + (p.stock * p.price * 0.3), 0);
                const margin = categoryProducts.reduce((sum, p) => sum + ((p.price - p.cost) / p.price), 0) / categoryProducts.length * 100;
                return { name: cat.name, revenue, margin: margin || 0 };
            }).sort((a, b) => b.revenue - a.revenue);

            document.getElementById('categoryPerformanceReport').innerHTML = categoryPerformance.map(cat => `
                <div class="performance-item">
                    <div class="performance-name">${cat.name}</div>
                    <div class="performance-metrics">
                        <span>Revenue: <strong>$${cat.revenue.toLocaleString('en-US', {minimumFractionDigits: 2})}</strong></span>
                        <span>Margin: <strong>${cat.margin.toFixed(1)}%</strong></span>
                    </div>
                </div>
            `).join('');

            // Risk Assessment Report
            const riskItems = [
                { risk: 'Stock Shortage Risk', level: 'High', items: lowStockProducts.length, impact: 'Revenue Loss' },
                { risk: 'Overstock Risk', level: 'Medium', items: overstockProducts.length, impact: 'Capital Tied Up' },
                { risk: 'Seasonal Demand Risk', level: 'Medium', items: 2, impact: 'Inventory Obsolescence' },
                { risk: 'Supplier Dependency', level: 'Low', items: 1, impact: 'Supply Chain Disruption' }
            ];

            document.getElementById('riskAssessmentReport').innerHTML = riskItems.map(risk => `
                <div class="risk-item ${risk.level.toLowerCase()}">
                    <div class="risk-header">
                        <strong>${risk.risk}</strong>
                        <span class="risk-level ${risk.level.toLowerCase()}">${risk.level} Risk</span>
                    </div>
                    <div class="risk-details">
                        <span>Affected Items: ${risk.items}</span>
                        <span>Potential Impact: ${risk.impact}</span>
                    </div>
                </div>
            `).join('');

            // Market Trends Report
            const trends = [
                { trend: 'Sustainable Fashion Growth', impact: '+15%', opportunity: 'Eco-friendly product lines' },
                { trend: 'Online Shopping Increase', impact: '+25%', opportunity: 'E-commerce expansion' },
                { trend: 'Athleisure Demand', impact: '+20%', opportunity: 'Sportswear category growth' }
            ];

            document.getElementById('marketTrendsReport').innerHTML = trends.map(trend => `
                <div class="trend-item">
                    <div class="trend-name">${trend.trend}</div>
                    <div class="trend-impact">Market Impact: <strong>${trend.impact}</strong></div>
                    <div class="trend-opportunity">Opportunity: ${trend.opportunity}</div>
                </div>
            `).join('');

            // Operational Efficiency Report
            const efficiency = [
                { metric: 'Inventory Turnover', current: '4.2x', target: '6.0x', status: 'Below Target' },
                { metric: 'Stock Accuracy', current: '94%', target: '98%', status: 'Needs Improvement' },
                { metric: 'Order Fulfillment', current: '87%', target: '95%', status: 'Below Target' },
                { metric: 'Cost per Transaction', current: '$12.50', target: '$10.00', status: 'Above Target' }
            ];

            document.getElementById('operationalEfficiencyReport').innerHTML = efficiency.map(eff => `
                <div class="efficiency-item">
                    <div class="efficiency-metric">${eff.metric}</div>
                    <div class="efficiency-values">
                        <span>Current: <strong>${eff.current}</strong></span>
                        <span>Target: ${eff.target}</span>
                    </div>
                    <div class="efficiency-status ${eff.status.toLowerCase().replace(' ', '-')}">${eff.status}</div>
                </div>
            `).join('');
        }

        function loadLowStockReport() {
            const container = document.getElementById('lowStockReport');
            const lowStockProducts = sampleData.products.filter(p => p.stock < p.minStock);
            
            if (lowStockProducts.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--color-success);">All products are adequately stocked!</p>';
                return;
            }
            
            container.innerHTML = lowStockProducts.map(product => `
                <div class="report-item">
                    <div>
                        <strong>${product.name}</strong><br>
                        <small>SKU: ${product.sku} | Category: ${product.category}</small>
                    </div>
                    <div style="text-align: right;">
                        <span class="stock-badge low">${product.stock}</span><br>
                        <small>Min: ${product.minStock}</small>
                    </div>
                </div>
            `).join('');
        }

        function loadCategorySummary() {
            const container = document.getElementById('categorySummary');
            const summary = sampleData.categories.map(category => {
                const categoryProducts = sampleData.products.filter(p => p.categoryId === category.id);
                const totalStock = categoryProducts.reduce((sum, p) => sum + p.stock, 0);
                const totalValue = categoryProducts.reduce((sum, p) => sum + (p.stock * p.price), 0);
                
                return {
                    name: category.name,
                    productCount: categoryProducts.length,
                    totalStock,
                    totalValue
                };
            });
            
            container.innerHTML = summary.map(cat => `
                <div class="report-item">
                    <div>
                        <strong>${cat.name}</strong><br>
                        <small>${cat.productCount} products</small>
                    </div>
                    <div style="text-align: right;">
                        <strong>${cat.totalStock} items</strong><br>
                        <strong>$${cat.totalValue.toLocaleString('en-US', {minimumFractionDigits: 2})}</strong>
                    </div>
                </div>
            `).join('');
        }

        function loadUsersData() {
            // Placeholder for users data loading
            console.log('Loading users data...');
        }

        function loadSettingsData() {
            const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
            if (currentUser) {
                document.getElementById('profileName').value = currentUser.name;
                document.getElementById('profileEmail').value = currentUser.email;
                document.getElementById('profileRole').value = currentUser.role;
            }
        }

        function handleLogout() {
            sessionStorage.clear();
            showToast('You have been logged out successfully', 'success');
            setTimeout(() => {
                window.location.href = 'login.html';
            }, 1000);
        }

        function toggleMobileMenu() {
            document.getElementById('sidebar').classList.toggle('show');
        }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('collapsed');
        }

        function toggleUserDropdown() {
            document.getElementById('userDropdownMenu').classList.toggle('show');
        }

        function showAddProductModal() {
            populateProductForm();
            document.getElementById('productModal').classList.add('show');
        }

        function populateProductForm() {
            const categorySelect = document.getElementById('productCategory');
            categorySelect.innerHTML = '<option value="">Select Category</option>';
            sampleData.categories.forEach(cat => {
                categorySelect.innerHTML += `<option value="${cat.id}">${cat.name}</option>`;
            });
        }

        function hideProductModal() {
            document.getElementById('productModal').classList.remove('show');
        }

        function showAddCategoryModal() {
            const name = prompt('Category Name:');
            if (!name) return;
            
            const description = prompt('Category Description:');
            if (!description) return;
            
            const newCategory = {
                id: Date.now(),
                name,
                description
            };
            
            sampleData.categories.push(newCategory);
            showToast('Category added successfully!', 'success');
            renderCategoriesGrid();
            loadCategoryFilter();
        }

        function editCategory(id) {
            const category = sampleData.categories.find(c => c.id === id);
            if (!category) return;
            
            const name = prompt('Category Name:', category.name);
            if (!name) return;
            
            const description = prompt('Category Description:', category.description);
            if (!description) return;
            
            category.name = name;
            category.description = description;
            
            showToast('Category updated successfully!', 'success');
            renderCategoriesGrid();
            loadCategoryFilter();
        }

        function deleteCategory(id) {
            if (!confirm('Are you sure you want to delete this category?')) return;
            
            const index = sampleData.categories.findIndex(c => c.id === id);
            if (index !== -1) {
                sampleData.categories.splice(index, 1);
                showToast('Category deleted successfully!', 'success');
                renderCategoriesGrid();
                loadCategoryFilter();
            }
        }

        function editProduct(id) {
            showToast('Product editing feature coming soon!', 'info');
        }

        function deleteProduct(id) {
            if (!confirm('Are you sure you want to delete this product?')) return;
            
            const index = sampleData.products.findIndex(p => p.id === id);
            if (index !== -1) {
                sampleData.products.splice(index, 1);
                showToast('Product deleted successfully!', 'success');
                renderProductsTable();
                updateProductStats();
                loadDashboardData();
            }
        }

        function showAddUserModal() {
            showToast('User management feature coming soon!', 'info');
        }

        function loadExecutiveSummary() {
            const products = sampleData.products;
            const lowStockProducts = products.filter(p => p.stock < p.minStock);
            const outOfStockProducts = products.filter(p => p.stock === 0);
            
            // Immediate Actions
            const immediateActions = [];
            if (outOfStockProducts.length > 0) {
                immediateActions.push(`${outOfStockProducts.length} products are out of stock - immediate restocking required`);
            }
            if (lowStockProducts.length > 0) {
                immediateActions.push(`${lowStockProducts.length} products below minimum stock levels`);
            }
            immediateActions.push('Review supplier contracts expiring this quarter');
            
            document.getElementById('immediateActions').innerHTML = immediateActions.map(action => 
                `<div class="action-item"><i class="fas fa-exclamation-circle"></i> ${action}</div>`
            ).join('');
            
            // Performance Insights
            const insights = [
                'Revenue growth of 12.5% compared to last month',
                'Footwear category showing strongest performance (+20%)',
                'Inventory turnover rate needs improvement (4.2x vs target 6.0x)',
                'Profit margins improved by 3.1% due to cost optimization'
            ];
            
            document.getElementById('performanceInsights').innerHTML = insights.map(insight => 
                `<div class="insight-item"><i class="fas fa-chart-line"></i> ${insight}</div>`
            ).join('');
            
            // Growth Opportunities
            const opportunities = [
                'Expand sustainable fashion line based on market trends',
                'Implement dynamic pricing for slow-moving inventory',
                'Develop exclusive partnerships with emerging brands',
                'Optimize inventory levels using AI-driven forecasting'
            ];
            
            document.getElementById('growthOpportunities').innerHTML = opportunities.map(opp => 
                `<div class="opportunity-item"><i class="fas fa-lightbulb"></i> ${opp}</div>`
            ).join('');
        }

        function loadBusinessInsights() {
            // This function can be expanded to load more business intelligence
            console.log('Business insights loaded');
        }

        function loadAnalyticsTabs() {
            // Initialize analytics tabs functionality
            showAnalyticsTab('sales');
        }

        function showAnalyticsTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.analytics-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + 'Analytics').classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
            
            // Load tab-specific content
            switch(tabName) {
                case 'sales':
                    loadSalesAnalytics();
                    break;
                case 'inventory':
                    loadInventoryAnalytics();
                    break;
                case 'profitability':
                    loadProfitabilityAnalytics();
                    break;
                case 'forecasting':
                    loadForecastingAnalytics();
                    break;
            }
        }

        function loadSalesAnalytics() {
            // Load sales analytics content
            const topProducts = sampleData.products
                .map(p => ({ ...p, estimatedSales: p.stock * p.price * 0.3 }))
                .sort((a, b) => b.estimatedSales - a.estimatedSales)
                .slice(0, 5);
            
            document.getElementById('topProductsTable').innerHTML = `
                <table class="analytics-table-content">
                    <thead>
                        <tr><th>Product</th><th>Revenue</th><th>Margin</th></tr>
                    </thead>
                    <tbody>
                        ${topProducts.map(p => `
                            <tr>
                                <td>${p.name}</td>
                                <td>$${p.estimatedSales.toLocaleString('en-US', {minimumFractionDigits: 2})}</td>
                                <td>${(((p.price - p.cost) / p.price) * 100).toFixed(1)}%</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
        }

        function loadInventoryAnalytics() {
            const insights = [
                'Average inventory age: 45 days',
                'Fastest moving category: Footwear (30 days)',
                'Slowest moving category: Outerwear (75 days)',
                'Optimal reorder point: 15 units for most SKUs'
            ];
            
            document.getElementById('inventoryInsights').innerHTML = insights.map(insight => 
                `<div class="insight-point"><i class="fas fa-info-circle"></i> ${insight}</div>`
            ).join('');
        }

        function loadProfitabilityAnalytics() {
            const recommendations = [
                'Increase prices on high-demand, low-margin items',
                'Negotiate better terms with suppliers for top-selling products',
                'Consider discontinuing products with margins below 20%',
                'Implement bundle pricing for complementary items'
            ];
            
            document.getElementById('profitabilityRecommendations').innerHTML = recommendations.map(rec => 
                `<div class="recommendation-item"><i class="fas fa-arrow-right"></i> ${rec}</div>`
            ).join('');
        }

        function loadForecastingAnalytics() {
            const predictions = [
                'Expected 18% growth in Q4 based on seasonal trends',
                'Footwear demand likely to increase by 25% in next quarter',
                'Outerwear sales expected to peak in November-December',
                'Recommend increasing inventory by 15% for holiday season'
            ];
            
            document.getElementById('forecastingPredictions').innerHTML = predictions.map(pred => 
                `<div class="prediction-item"><i class="fas fa-crystal-ball"></i> ${pred}</div>`
            ).join('');
        }

        // Enhanced utility functions
        function refreshDashboard() {
            showToast('Dashboard data refreshed', 'success');
            loadDashboardData();
        }

        function exportDashboard() {
            showToast('Dashboard report exported successfully', 'success');
        }

        function exportAllReports() {
            showToast('All reports exported successfully', 'success');
        }

        function generateReport() {
            showToast('Custom report generated', 'success');
        }

        // Product form submission
        document.getElementById('productForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('productName').value;
            const sku = document.getElementById('productSku').value;
            const categoryId = parseInt(document.getElementById('productCategory').value);
            const price = parseFloat(document.getElementById('productPrice').value);
            const cost = parseFloat(document.getElementById('productCost').value);
            const stock = parseInt(document.getElementById('productStock').value);
            const minStock = parseInt(document.getElementById('productMinStock').value);
            const maxStock = parseInt(document.getElementById('productMaxStock').value);
            const size = document.getElementById('productSize').value;
            const color = document.getElementById('productColor').value;
            const description = document.getElementById('productDescription').value;
            const image = document.getElementById('productImage').value || 'https://via.placeholder.com/150';
            
            if (!name || !sku || !categoryId || !price || !cost || stock < 0 || !minStock || !maxStock) {
                showToast('Please fill in all required fields', 'error');
                return;
            }
            
            const category = sampleData.categories.find(c => c.id === categoryId);
            
            const newProduct = {
                id: Date.now(),
                name,
                sku,
                categoryId,
                category: category.name,
                price,
                cost,
                stock,
                minStock,
                maxStock,
                size,
                color,
                description,
                image
            };
            
            sampleData.products.push(newProduct);
            showToast('Product added successfully!', 'success');
            hideProductModal();
            renderProductsTable();
            updateProductStats();
            loadDashboardData();
            
            // Reset form
            document.getElementById('productForm').reset();
        });

        function saveSystemPreferences() {
            showToast('Preferences saved successfully!', 'success');
        }

        function changePassword() {
            const newPassword = prompt('Enter new password:');
            if (newPassword && newPassword.length >= 6) {
                showToast('Password changed successfully!', 'success');
            } else if (newPassword) {
                showToast('Password must be at least 6 characters long', 'error');
            }
        }

        function logoutAllSessions() {
            if (confirm('This will log you out from all devices. Continue?')) {
                handleLogout();
            }
        }

        function showToast(message, type = 'success') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'times-circle' : 'exclamation-circle'}"></i>
                <span>${message}</span>
            `;
            
            container.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }
    </script>
</body>
</html>